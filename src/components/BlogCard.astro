---
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const slug = post.id.replace(/\.(md|mdx)$/i, '');
const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith('/') ? rawBase : `${rawBase}/`;
const url = `${base}blog/${slug}/`;
---

<article class="card">
  <p class="card-meta">{post.data.pubDate.toLocaleDateString('en-US', { dateStyle: 'medium' })}</p>
  <h3><a href={url}>{post.data.title}</a></h3>
  <p>{post.data.description}</p>
  <div class="tag-list" aria-label="Post tags">
    {post.data.tags.map((tag) => <span class="tag">{tag}</span>)}
  </div>
</article>
