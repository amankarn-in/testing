---
import type { CollectionEntry } from 'astro:content';

interface Props {
  doc: CollectionEntry<'docs'>;
}

const { doc } = Astro.props;
const slug = doc.id.replace(/\.(md|mdx)$/i, '');
const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith('/') ? rawBase : `${rawBase}/`;
const url = `${base}docs/${slug}/`;
---

<article class="card">
  <p class="card-meta">{doc.data.category}</p>
  <h3><a href={url}>{doc.data.title}</a></h3>
  <p>{doc.data.description}</p>
  <div class="tag-list" aria-label="Documentation tags">
    {doc.data.tags.map((tag) => <span class="tag">{tag}</span>)}
  </div>
</article>
